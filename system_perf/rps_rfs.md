## 概述

RPS（Receive Packet Steering）和RFS（Receive Flow Steering）都是用于提高网络性能的技术，特别是在多核系统上。它们的主要目标是通过在多个 CPU 核心之间更好地分配网络负载来减轻单个 CPU 核心的负载，从而提高网络吞吐量和降低延迟。

**RPS（Receive Packet Steering）**：

- RPS 将网络流量的处理分散到多个 CPU 核心，以便更有效地利用系统中的多个 CPU。它通过将网络接收队列中的数据包转发到不同的 CPU 核心来实现。
- 当数据包到达网络接口时，RPS 会根据一定的哈希算法将数据包分配到不同的 CPU 核心上进行处理，从而实现负载均衡。
- RPS 可以减少单个 CPU 核心上的中断处理和数据包处理，从而降低了 CPU 内部的竞争和延迟，提高了网络的吞吐量和响应性能

**RFS（Receive Flow Steering）**：

- RFS 更进一步地优化了数据包的分发，它不仅考虑了数据包的哈希值，还结合了网络流的信息。
- RFS 会分析数据包的特征，例如源 IP、目标 IP、源端口、目标端口等，然后将同一网络流中的数据包分配到同一个 CPU 核心上进行处理。
- 这种方式可以更好地利用 CPU 缓存的局部性，并避免在处理同一网络流的数据包时在不同的 CPU 核心之间进行上下文切换，从而提高了处理效率和降低了延迟